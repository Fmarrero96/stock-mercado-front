<div class="header">
  <h2>Proveedores</h2>
  <button class="btn-add" (click)="abrirModal()">
    Nuevo
  </button>
</div>

<div class="search">
  <input 
    #searchInput
    type="text" 
    [(ngModel)]="termino" 
    (input)="aplicarFiltro()" 
    placeholder="Buscar proveedores..."
    id="searchInput"
  />
</div>

<div class="error" *ngIf="error">
  {{ error }}
</div>

<div class="providers-table" *ngIf="filtrados.length > 0; else sinProveedores">
  <div class="table-header">
    <span>Nombre</span>
    <span>Email</span>
    <span>Tel茅fono</span>
    <span>Direcci贸n</span>
    <span></span>
  </div>
  <div *ngFor="let p of filtrados" class="provider-row">
    <span class="name">{{ p.nombre }}</span>
    <span class="email">{{ p.email }}</span>
    <span class="phone">{{ p.telefono || 'Sin tel茅fono' }}</span>
    <span class="address">{{ p.direccion || 'Sin direcci贸n' }}</span>
    <div class="actions">
      <button class="btn-edit" (click)="abrirModal(p)">锔</button>
    </div>
  </div>
</div>

<ng-template #sinProveedores>
  <div class="empty-state">
    <span class="empty-icon"></span>
    <p>No hay proveedores registrados.</p>
  </div>
</ng-template>

<!-- Modal -->
<div class="modal" *ngIf="mostrarModal">
  <div class="modal-content">
    <div class="modal-header">
      <span>{{ modoEdicion ? 'Editar' : 'Nuevo' }} Proveedor</span>
      <button (click)="cerrarModal()">&times;</button>
    </div>

    <div class="modal-body">
      <form [formGroup]="proveedorForm" (ngSubmit)="guardarProveedor()">
        <div class="form-grid">
          <div class="form-field">
            <label for="nombre">Nombre</label>
            <input 
              id="nombre"
              formControlName="nombre" 
              type="text"
              placeholder="Nombre del proveedor"
              [class.error]="proveedorForm.get('nombre')?.invalid && proveedorForm.get('nombre')?.touched"
            />
            <span class="error" *ngIf="proveedorForm.get('nombre')?.errors?.['required'] && proveedorForm.get('nombre')?.touched">
              Requerido
            </span>
          </div>

          <div class="form-field">
            <label for="email">Email</label>
            <input 
              id="email"
              formControlName="email" 
              type="email"
              placeholder="Email del proveedor"
              [class.error]="proveedorForm.get('email')?.invalid && proveedorForm.get('email')?.touched"
            />
            <span class="error" *ngIf="proveedorForm.get('email')?.errors?.['required'] && proveedorForm.get('email')?.touched">
              Requerido
            </span>
            <span class="error" *ngIf="proveedorForm.get('email')?.errors?.['email'] && proveedorForm.get('email')?.touched">
              Email no v谩lido
            </span>
          </div>

          <div class="form-field">
            <label for="telefono">Tel茅fono</label>
            <input 
              id="telefono"
              formControlName="telefono"
              type="tel"
              placeholder="Tel茅fono"
            />
          </div>

          <div class="form-field">
            <label for="direccion">Direcci贸n</label>
            <input 
              id="direccion"
              formControlName="direccion"
              type="text"
              placeholder="Direcci贸n"
            />
          </div>
        </div>
      </form>
    </div>

    <div class="modal-actions">
      <button type="button" class="btn-cancel" (click)="cerrarModal()">
        Cancelar
      </button>
      <button 
        type="button" 
        class="btn-save" 
        (click)="guardarProveedor()"
        [disabled]="proveedorForm.invalid"
      >
        {{ modoEdicion ? 'Actualizar' : 'Guardar' }}
      </button>
    </div>
  </div>
</div>
